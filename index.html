<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Out-of-memory and memory efficient Linear Model fitting with support for Inference • ploom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Out-of-memory and memory efficient Linear Model fitting with support for Inference">
<meta property="og:description" content="A collection of tools for out-of-memory linear model fitting and
    inference. Implements `lm` and `glm` analogs using Alan Miller's AS274
    updating QR factorization algorithm. Collects and reports an array of
    pertinent fit statistics. Provides flexible and easy to use mechanisms
    to stream in data and stream out results during fitting.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-pellucid navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ploom</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/oomlm.html">Linear Model</a>
    </li>
    <li>
      <a href="articles/oomlm.html">Generalized Linear Model</a>
    </li>
  </ul>
</li>
<li>
  <a href="articles/benchmark.html">Benchmarking</a>
</li>
<li>
  <a href="https://github.com/blakeboswell/ploom">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="ploom" class="section level1">


<!-- [AppVeyor Build Status]() -->
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><strong>Memory efficient</strong> Linear and Generalized Linear models with support for Inferential analysis.</p>
<ul>
<li>Performs out-of-memory processing capable of fitting <strong>billions</strong> of observations</li>
<li>Performs in-memory processing at runtimes comparable to <code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code> and <code><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm()</a></code> with bounded memory</li>
<li>Manages iterative processing of data in a Database, file connection, or in-memory source</li>
</ul>
<blockquote>
<p><code>ploom</code> is currently in beta. See development [roadmap] for details.</p>
</blockquote>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># development version from GitHub:</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"blakeboswell/ploom"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="in-memory-data" class="section level3">
<h3 class="hasAnchor">
<a href="#in-memory-data" class="anchor"></a>In-memory Data</h3>
<p><code><a href="reference/oomlm.html">oomlm()</a></code> models are intialized with a <code><a href="https://www.rdocumentation.org/packages/stats/topics/formula">formula()</a></code>; fit to data with calls to <code><a href="reference/update.html">update()</a></code>; and analyzed with standard summary and extractor functions.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ploom)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">x &lt;-<span class="st"> </span><span class="kw"><a href="reference/oomlm.html">oomlm</a></span>(mpg <span class="op">~</span><span class="st"> </span>cyl <span class="op">+</span><span class="st"> </span>disp)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">x &lt;-<span class="st"> </span><span class="kw"><a href="reference/update.html">update</a></span>(x, <span class="dt">data =</span> mtcars)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/generics/topics/tidy">tidy</a></span>(x)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 7
##   term        estimate std.error statistic  p.value conf.low  conf.high
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 (Intercept)  34.7       2.55       13.6  4.02e-14  29.5     39.9     
## 2 cyl          -1.59      0.712      -2.23 3.37e- 2  -3.04    -0.131   
## 3 disp         -0.0206    0.0103     -2.01 5.42e- 2  -0.0416   0.000395</code></pre>
<p>Because <code><a href="reference/update.html">update()</a></code> only allocates memory for the provided <code>data</code>, fitting with more calls to <code><a href="reference/update.html">update()</a></code> on smaller <em>chunks</em> of <code>data</code> requires less memory. For example, the following loop produces the same fit while using only ~3% of the memory.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">y  &lt;-<span class="st"> </span><span class="kw"><a href="reference/oomlm.html">oomlm</a></span>(mpg <span class="op">~</span><span class="st"> </span>cyl <span class="op">+</span><span class="st"> </span>disp)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(mtcars)) {</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  y &lt;-<span class="st"> </span><span class="kw"><a href="reference/update.html">update</a></span>(y, mtcars[i, ])</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all.equal">all.equal</a></span>(x, y)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Its possible to chunk and fit in-memory data without writing custom loops using the function <code><a href="reference/oomdata_dbi.html">oomdata_tbl()</a></code>. The following example is equivalent to the previous in both fit results and total memory allocated.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">chunks &lt;-<span class="st"> </span><span class="kw"><a href="reference/oomdata_dbi.html">oomdata_tbl</a></span>(mtcars, <span class="dt">chunk_size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">y &lt;-<span class="st"> </span><span class="kw"><a href="reference/oomlm.html">oomlm</a></span>(mpg <span class="op">~</span><span class="st"> </span>cyl <span class="op">+</span><span class="st"> </span>disp)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">y &lt;-<span class="st"> </span><span class="kw"><a href="reference/update.html">update</a></span>(y, <span class="dt">data =</span> chunks)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all.equal">all.equal</a></span>(x, y)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Fitting with more calls to <code><a href="reference/update.html">update()</a></code> does not result in a runtime increase and frees RAM for simultaneous or parallel fitting. This is ideal in multi-user environments and under heavy regression loads that involve fitting multiple models. See <a href="'/articles/benchmark.html">benchmarking</a> for a detailed runtime comparison with <code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code>, <code><a href="https://www.rdocumentation.org/packages/stats/topics/glm">glm()</a></code>.</p>
</div>
<div id="out-of-memory-data" class="section level3">
<h3 class="hasAnchor">
<a href="#out-of-memory-data" class="anchor"></a>Out-of-memory Data</h3>
<p>The pattern for fitting <code><a href="reference/oomlm.html">oomlm()</a></code> models to out-of-memory data is the same as in-memory data, except that the data to be fit is read between calls to <code><a href="reference/update.html">update()</a></code>.</p>
<p>The function <code><a href="reference/oomdata_dbi.html">oomdata_con()</a></code> assist with fitting fron file or gzip connections, and <code><a href="reference/oomdata_dbi.html">oomdata_dbi()</a></code> facilitaties fitting to data stored in any database with a <code>DBI</code> backend.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(RSQLite)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dbplyr)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/RSQLite/topics/SQLite">SQLite</a></span>(), <span class="dt">path =</span> <span class="st">":dbname:"</span>)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/copy_to.html">copy_to</a></span>(con, mtcars, <span class="st">"mtcars"</span>, <span class="dt">temporary =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">rs     &lt;-<span class="st"> </span><span class="kw">dbSendQuery</span>(con, <span class="st">"select mpg, cyl, disp from mtcars"</span>)</a>
<a class="sourceLine" id="cb8-8" data-line-number="8"></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#' fit model</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">chunks &lt;-<span class="st"> </span><span class="kw"><a href="reference/oomdata_dbi.html">oomdata_dbi</a></span>(rs, <span class="dt">chunk_size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">z      &lt;-<span class="st"> </span><span class="kw"><a href="reference/update.html">update</a></span>(<span class="kw"><a href="reference/oomlm.html">oomlm</a></span>(mpg <span class="op">~</span><span class="st"> </span>cyl <span class="op">+</span><span class="st"> </span>disp), <span class="dt">data =</span> chunks)</a>
<a class="sourceLine" id="cb8-12" data-line-number="12"></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all.equal">all.equal</a></span>(x, z)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>See the articles <a href="">NA</a> and <a href="">NA</a> for more on interfacing with databases.</p>
</div>
<div id="inference-and-prediction" class="section level3">
<h3 class="hasAnchor">
<a href="#inference-and-prediction" class="anchor"></a>Inference and Prediction</h3>
<p><code>ploom()</code> models are compatible with dozens of <code>stats</code> <code>extractor</code> functions and capable of providing standard errors, robust standard errors, confidence intervals, prediction intervals, and residuals.</p>
</div>
</div>
<div id="alternatives" class="section level2">
<h2 class="hasAnchor">
<a href="#alternatives" class="anchor"></a>Alternatives</h2>
<ul>
<li><a href="https://cran.r-project.org/web/packages/biglm/index.html"><code>biglm</code></a></li>
<li><a href="https://cran.r-project.org/web/packages/speedglm/index.html"><code>speedglm</code></a></li>
</ul>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>Thanks to:</p>
<ul>
<li>Fitting is performed via Alan Miller’s AS274 updating QR factorization algorithm</li>
<li><a href="https://cran.r-project.org/web/packages/biglm/index.html"><code>biglm</code></a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="https://github.com/bboswell/ploom/issues">https://​github.com/​bboswell/​ploom/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/blakeboswell">Blake Boswell</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=ploom"><img src="https://www.r-pkg.org/badges/version/ploom" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://api.travis-ci.com/blakeboswell/ploom"><img src="https://api.travis-ci.com/blakeboswell/ploom.svg?branch=develop" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/blakeboswell/ploom?branch=develop"><img src="https://codecov.io/gh/blakeboswell/ploom/branch/develop/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/blakeboswell">Blake Boswell</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
